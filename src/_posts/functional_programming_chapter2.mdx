---
title: "쏙쏙 들어오는 함수형 코딩 Chapter2 리뷰"
date: 2023-08-30 10:00
description: 계층형 설계, 액션을 타임라인으로 시각화, 타임라인 다이어그램, 커팅
---

두번째 챕터에서도 피자 가게 예시를 통해서, 함수형 사고를 알아보는 챕터입니다.
역시, 함수형 사고 중에 가장 먼저 '액션, 데이터, 계산'을 구분하는 것부터 시작합니다.
이 세가지를 가장 먼저 구분하는 이유는 '쉽게 다룰수 있는 부분'과 조심히 다룰 수 있는 부분을 명확하게 하기 위함입니다.

## 복습
### 액션
호출 횟수와 시점에 의존하는 것입니다. 책 예시에서는 '피자 가게'를 기준으로 상황이 벌어지기 때문에
오븐이나 배달차 같은 자원과 요리 재료를 사용하는 것을 예시로 들고 있습니다. 액션을 사용할때는 조심해야합니다.
(ex. 반죽 펴기, 피자 배달, 재료 주문)

### 계산
어떤 것을 결정하거나 계획하는 것은 계산입니다. 계산은 횟수와 상관없고, 다른 곳에 영향을 주지 않습니다.
(ex. 조리법에 나온 것을 두 배로 만들기, 쇼핑 목록 결정)

### 데이터
결제, 재고, 피자 조리법 같은 것이 데이터입니다. 데이터는 유연하기 때문에 저장하거나, 네트워크로 전송하는 등
다양한 방법으로 사용됩니다.
(ex. 고객 주문, 영수증, 조리법)

## 계층화 설계 (맛보기)
변경 가능성에 따라서 코드를 나눠 봅니다.
자주 바뀌는 것을 위로, 잘 바뀌지 않는 것들을 아래로 나눠봅니다.
![layerd_arci](/images/layerd_arci.png)

각 계층은 아래 있는 계층을 기반으로 만들어 지고, 이런 구조로 소프트웨어를 만들면 가장 위에 있는 코드는 의존성이 거의 없기 때문에
코드를 쉽게 변경할 수 있습니다. 아래에 있는 코드들은 위에 계층에 있는 코드들 보다 의존성이 많아 변경하기 어렵지만 자주 바뀌지 않습니다.

함수형 프로그래머는 이 아키텍처 패턴이 계층을 만들기 때문에 '계층형 설계'로 부릅니다.
일반적으로 '비즈니스 규칙', '도메인 규칙', '기술 스택' 계층으로 나뉩니다.

## 타임라인 다이어그램, 타임라인 커팅
액션을 정의하고 순서에 따라 나열한것을 '타임라인 다이어그램'이라고 합니다.
'타임라인 다이어그램'을 통해 액션이 실행되는 순서들을 볼 수 있습니다. 액션은 실행 순서에 의존하기 때문에 실행 순서를 파악하는 것은 중요합니다.

분산 시스템에서, 각각의 타임 라인을 만들고 타임라인을 서로 맞추지 않으면 예측 불가능한 순서로 실행됩니다.
기본적으로 타임라인은 서로 순서를 맞추지 않고, 액션이 실행되는 시간이 매번 달라 타이밍이 어긋나는 경우가 존재하기 때문에

'타임라인 커팅' 이라는 기술을 사용합니다.
'타임라인 커팅'은 여러 타임라인이 동시에 진행될 때 서로 순서를 맞추는 방법입니다.
'타임라인 커팅'은 고차 동작으로 구현해서, 독립적으로 타임라인이 동작하고 다른 타임라인이 완료될때까지 기다리기 때문에
어떤 타임라인이 먼저 끝나도 괜찮습니다.

## 정리
- 액션과 계산, 데이터를 구분하는 방법을 알아야합니다.
- 타임라인 다이어그램은 액션을 시각화 하는 방법입니다.
- 타임라인 커팅을 통해 액션이 올바른 순서대로 실행되게 보장해줍니다.
